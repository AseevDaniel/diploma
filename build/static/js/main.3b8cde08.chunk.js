(this.webpackJsonpdiploma=this.webpackJsonpdiploma||[]).push([[0],{105:function(e,t,n){},113:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},175:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var s=n(5),a=n.n(s),c=n(33),r=n.n(c),i=n(23),o=n(58),l=(n(105),n(16)),d=n(22),u=function(){return Object(o.b)()},j=o.c;function b(){var e=j((function(e){return e.userReducer})),t=e.email,n=e.token;return{isAuth:!!n,email:t,token:n,id:e.id}}var O,f=n(6),h=function(){u(),b().email;return Object(f.jsx)("div",{children:Object(f.jsx)(i.b,{to:"/sessions",children:"To session page"})})},m=n(41),v=n(10),p=n(36),x={email:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,phone:/^(\+)?((\d{2,3}) ?\d|\d)(([ -]?\d)|( ?(\d{2,3}) ?)){5,12}\d$/},g=function(e){var t,n,a,c=e.handleClick,r=e.isRegister,i=void 0!==r&&r,o=Object(p.b)(),l=o.getValues,d=o.register,u=o.handleSubmit,j=o.formState.errors;return Object(s.useEffect)((function(){console.log(j)}),[j]),Object(f.jsx)("div",{children:Object(f.jsxs)("form",{onSubmit:u((function(e){c(e)})),children:[Object(f.jsx)("p",{children:"Email"}),Object(f.jsx)("input",Object(v.a)({type:"email"},d("email",{required:{value:!0,message:"This field is required"},pattern:{value:x.email,message:"invalid email address"}}))),Object(f.jsx)("span",{children:null===(t=j.email)||void 0===t?void 0:t.message}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{children:"Password"}),Object(f.jsx)("input",Object(v.a)({type:"password"},d("password",{required:{value:!0,message:"This field is required"},minLength:{value:6,message:"Password must have at least 6 characters"}}))),Object(f.jsx)("span",{children:null===(n=j.password)||void 0===n?void 0:n.message}),Object(f.jsx)("br",{}),i&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"Repeat Password"}),Object(f.jsx)("input",Object(v.a)({type:"password"},d("passwordRepeat",{validate:function(e){return e===l("password")||"The passwords do not match"}}))),Object(f.jsx)("span",{children:null===(a=j.passwordRepeat)||void 0===a?void 0:a.message})]}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{type:"submit"})]})})},D=n(67),S=Object(D.b)({name:"user",initialState:{email:null,token:null,id:null},reducers:{setUser:function(e,t){e.email=t.payload.email,e.token=t.payload.token,e.id=t.payload.id},removeUser:function(e){e.email=null,e.token=null,e.id=null}}}),N=S.actions,C=N.setUser,y=N.removeUser,T=S.reducer,E=function(){var e=u(),t=Object(d.g)().push;return Object(f.jsx)(g,{handleClick:function(n){var s=Object(m.b)();Object(m.c)(s,n.email,n.password).then((function(n){var s=n.user;console.log(s),e(C({email:s.email,id:s.uid,token:s.refreshToken})),t("/profile")})).catch((function(){return alert("Invalid user!")}))}})},k=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Login"}),Object(f.jsx)(E,{}),Object(f.jsxs)("p",{children:["Or ",Object(f.jsx)(i.b,{to:"/register",children:"register"})]})]})},w=n(0),A=n(3);!function(e){e.ADMIN="admin",e.STORE="store",e.DEFAULT="default"}(O||(O={}));var _,F=n(40),I=n(53),M=n(88),U=Object(M.a)({apiKey:"AIzaSyBcpILf8IsZulNlj_G4KDFLep-9uL4xkic",authDomain:"diploma-f24eb.firebaseapp.com",projectId:"diploma-f24eb",databaseURL:"https://diploma-f24eb-default-rtdb.europe-west1.firebasedatabase.app/",storageBucket:"diploma-f24eb.appspot.com",messagingSenderId:"832527666399",appId:"1:832527666399:web:eddf73646c9320cd9a2d6a"}),L=Object(F.e)(U),q=Object(I.a)(U),R=function(){var e=Object(A.a)(Object(w.a)().mark((function e(t){var n;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(F.d)(Object(F.b)(L,t));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(A.a)(Object(w.a)().mark((function e(t,n){return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(F.a)(Object(F.b)(L,t),n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(A.a)(Object(w.a)().mark((function e(t,n){var s;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],n.forEach((function(e){s.push(Object(F.a)(Object(F.b)(L,t),e))})),e.prev=2,e.next=5,Promise.all(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(A.a)(Object(w.a)().mark((function e(t,n,s){return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(F.f)(Object(F.c)(L,t,n),s);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n,s){return e.apply(this,arguments)}}(),Y=function(e,t,n){var s=Object(I.c)(q,e+t);Object(I.b)(s,(function(e){var t=e.val();null===n||void 0===n||n(t)}))},H="users/",G=function(){var e=Object(A.a)(Object(w.a)().mark((function e(t){return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=H,s=t.uid,a=t,Object(I.d)(Object(I.c)(q,n+s),a).catch((function(e){return alert(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}var n,s,a}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(e){return Y(H,"",e)},z=function(){var e=u(),t=Object(d.g)().push;return Object(f.jsx)(g,{handleClick:function(n){var s=Object(m.b)();Object(m.a)(s,n.email,n.password).then((function(n){var s=n.user;console.log(s),e(C({email:s.email,id:s.uid,token:s.refreshToken})),G({email:s.email,uid:s.uid,role:"default"}),t("/profile")})).catch(console.error)},isRegister:!0})},K=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Register"}),Object(f.jsx)(z,{}),Object(f.jsxs)("p",{children:["Already have an account? ",Object(f.jsx)(i.b,{to:"/login",children:"Sign in"})]})]})},Z=n(17),J=n(18),$=n.n(J),Q="sessions",X=function(){var e=Object(A.a)(Object(w.a)().mark((function e(){var t,n;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(Q);case 2:return t=e.sent,n=[],t.forEach((function(e){n.push(Object(v.a)(Object(v.a)({},e.data()),{},{id:e.id}))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(e){return V(Q,e)},te=function(e,t){return B(Q,e,t)},ne=function(){var e=Object(A.a)(Object(w.a)().mark((function e(t){var n,s;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(n=e.sent,t.length){e.next=5;break}return e.abrupt("return",n);case 5:return s=n.filter((function(e){return e.ownerUid&&t.includes(e.ownerUid)})),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=n(44),ae=n.n(se),ce=(n(113),function(e){var t=e.size,n=void 0===t?"xl":t,s=e.style,a=e.className,c=void 0===a?"":a,r=e.isWithoutCentering,i=ae()("loaderWrapper",c,n,{centeredLoader:!r}),o=ae()("loader");return Object(f.jsx)("div",{className:i,style:s,children:Object(f.jsxs)("div",{className:o,children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})})});!function(e){e.PENDING="PENDING",e.SUCCESS="SUCCESS",e.FAILED="FAILED"}(_||(_={}));n(114);var re,ie=n(21),oe=n(89),le=n.n(oe);!function(e){e.DEFAULT_DATE_TIME="YYYY-MM-DDTHH:mm",e.DEFAULT_DATE="YYYY-MM-DD",e.DEFAULT_TIME="HH:mm",e.DATE_PICKER_DATE_TIME="MMMM d, yyyy - HH:mm",e.DATE_FOR_SLOT="MMMM DD",e.DATE_FOR_SCHEDULE="MMMM dd"}(re||(re={}));var de=["name","control","onChangeData","defaultValue"],ue=function(e){var t=e.name,n=e.control,s=e.onChangeData,a=e.defaultValue,c=void 0===a?$()():a,r=Object(ie.a)(e,de);return Object(f.jsx)(p.a,{name:t,defaultValue:c,control:n,render:function(e){var t=e.field;return Object(f.jsx)(le.a,Object(v.a)(Object(v.a)({dateFormat:re.DATE_PICKER_DATE_TIME,showTimeSelect:!0,timeFormat:re.DEFAULT_TIME,timeIntervals:15},r),{},{selected:new Date(t.value||$()(c).format(re.DEFAULT_DATE_TIME)),onChange:function(e){t.onChange(e),null===s||void 0===s||s(e)}}))}})},je=(n(155),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:re.DEFAULT_DATE_TIME;return $()(e).format(t)}),be=function(e){var t,n=e.onCreate,a=Object(p.b)(),c=a.control,r=a.register,i=a.handleSubmit,o=a.formState.errors,d=a.setValue,u=a.getValues,j=Object(s.useContext)(Ge),b=Object(s.useState)(null),O=Object(l.a)(b,2),h=O[0],m=O[1],g=function(){var e=Object(A.a)(Object(w.a)().mark((function e(t){var s;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=17;break}return m(_.PENDING),e.prev=2,s=Object(v.a)(Object(v.a)({},t),{},{startDate:je(t.startDate),endDate:je(t.endDate),isAvailable:!0,ownerUid:null===j||void 0===j?void 0:j.uid}),e.next=6,ee(s);case 6:return e.next=8,G(Object(v.a)(Object(v.a)({},j),{},{sessionsCreated:[].concat(Object(Z.a)((null===j||void 0===j?void 0:j.sessionsCreated)||[]),[s])}));case 8:m(_.SUCCESS),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),m(_.FAILED);case 14:return e.prev=14,n(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("form",{className:"createSessionForm",onSubmit:i(g),children:h===_.PENDING?Object(f.jsx)(ce,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"Name"}),Object(f.jsx)("input",Object(v.a)({defaultValue:null===j||void 0===j?void 0:j.name},r("name",{required:!0}))),o.name&&Object(f.jsx)("span",{children:"This field is required"}),Object(f.jsx)("br",{})]}),Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"Phone"}),Object(f.jsx)("input",Object(v.a)({defaultValue:null===j||void 0===j?void 0:j.phone},r("phone",{required:{value:!0,message:"This field is required"},pattern:{value:x.phone,message:"Invalid phone number"}}))),Object(f.jsx)("span",{children:null===(t=o.phone)||void 0===t?void 0:t.message})]}),Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"Adress"}),Object(f.jsx)("input",Object(v.a)({defaultValue:null===j||void 0===j?void 0:j.address},r("address",{required:!0}))),o.address&&Object(f.jsx)("span",{children:"This field is required"})]}),Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"Start of session"}),Object(f.jsx)(ue,{onChange:function(){},name:"startDate",control:c,onChangeData:function(e){e&&d("endDate",$()(e).add(1,"hour").format())}}),o.startDate&&Object(f.jsx)("span",{children:"This field is required"})]}),Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"End of session"}),Object(f.jsx)(ue,{defaultValue:$()().add(1,"hour"),onChange:function(){},name:"endDate",control:c,onChangeData:function(e){var t=$()(u("startDate"));$()(e).isSame(t,"day")&&$()(e).isAfter(t)||d("startDate",$()(e).subtract(1,"hour").format())}}),o.endDate&&Object(f.jsx)("span",{children:"This field is required"})]}),Object(f.jsx)("input",{className:"submitButton",type:"submit"})]})})},Oe=(n(156),function(e){var t=e.onClose,n=e.title,s=e.isLoading,a=e.size,c=void 0===a?"small":a,r=e.children,i="modal modal-".concat(c);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"modal-mask"}),Object(f.jsx)("div",{className:i,children:s?Object(f.jsx)(ce,{}):Object(f.jsxs)(f.Fragment,{children:[n&&Object(f.jsx)("h1",{className:"title",children:n}),Object(f.jsx)("span",{className:"close-icon",onClick:t,children:"+"}),r]})})]})}),fe=(n(157),function(e){for(var t=e.clone().startOf("month").startOf("week"),n=e.clone().endOf("month").endOf("week"),s=t.clone().subtract(1,"day"),a=[];s.isBefore(n,"day");){var c=s.add(1,"day").clone(),r=$()().isSame(c,"date"),i=!e.isSame(c,"month"),o=c.isBefore($()(),"day"),l=e.isSame(c,"day");a.push({value:c,active:r,disabled:i,past:o,selected:l})}return a}),he=(n(158),"H:mm"),me=function(e){var t=e.timeslots,n=e.currentSession,s=e.setCurrentSession,a=e.isDisabled;console.log(t);var c=null===t||void 0===t?void 0:t.sort((function(e,t){return $()(e.startDate).diff($()(t.startDate))})),r=function(e){var t=$()(e.startDate).format(he),n=$()(e.endDate).format(he);return"".concat(t," - ").concat(n)},i=function(e,t,s){var c=e.startDate===(null===n||void 0===n?void 0:n.startDate),r=a;return ae()("timeslots__item",{"timeslots__item--disabled":r,"timeslots__item--selected":c,"timeslots__item--unavailable":!e.isAvailable})};return Object(f.jsx)("div",{className:"timeslotsWrapper",children:null!==c&&void 0!==c&&c.length?Object(f.jsx)("div",{className:"timeslots",children:null===c||void 0===c?void 0:c.map((function(e,t){return Object(f.jsx)("div",{onClick:function(){return null===s||void 0===s?void 0:s(e)},className:i(e,0,c.length),children:Object(f.jsx)("span",{children:r(e)})},r(e))}))}):null})},ve=function(e){var t,n=e.day,s=e.setDate,a=e.isWithAvailable,c=e.isDisabled,r=!(null!==(t=n.timeslots)&&void 0!==t&&t.length)&&!n.disabled&&a;return Object(f.jsxs)("div",{onClick:function(){return s(n)},className:ae()("calendar__day",{"calendar__day--active":n.active,"calendar__day--selected":n.selected,"calendar__day--disabled":n.disabled,"calendar__day--unavailable":r,"calendar__day--pastDate":n.past,"calendar__day--allDisabled":c}),children:[Object(f.jsx)("span",{children:n.value.format("D")}),function(e){var t;if(!e.disabled&&a&&!e.past)return null!==(t=e.timeslots)&&void 0!==t&&t.length?e.timeslots.every((function(e){return!e.isAvailable}))?Object(f.jsx)("p",{children:"No available slots"}):void 0:Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("p",{children:"No slots"})})}(n)]})},pe=[0,1,2,3,4,5,6],xe=function(){return Object(f.jsx)(f.Fragment,{children:pe.map((function(e,t){return Object(f.jsx)("span",{children:$()().weekday(e).format("ddd")},t)}))})},ge=function(e){var t=e.currentDate,n=e.setCurrentDate,s=e.isDisabled,a=function(e,s){var a=t.clone().subtract(s,"month");n(a)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left",n="right"===e,c=s||t.isSame($()(),"month")&&!n;return Object(f.jsx)("button",{onClick:function(e){return a(0,n?-1:1)},className:"arrowButton",disabled:c,type:"button",children:n?"Next":"Prev"})};return Object(f.jsxs)(f.Fragment,{children:[c("left"),Object(f.jsx)("span",{children:$()(t).format("MMMM YYYY")}),c("right")]})},De="https://uxwing.com/wp-content/themes/uxwing/download/12-peoples-avatars/user-profile.png",Se=["onConfirm","description"],Ne=function(e){var t=e.onConfirm,n=e.description,s=void 0===n?"Are you sure?":n,a=Object(ie.a)(e,Se);return Object(f.jsx)(Oe,Object(v.a)(Object(v.a)({},a),{},{size:"confirm",children:Object(f.jsxs)("div",{className:"confirmModal",children:[Object(f.jsx)("h2",{children:s}),Object(f.jsxs)("div",{className:"controls",children:[Object(f.jsx)("button",{onClick:a.onClose,className:"cancel",children:"Cancel"}),Object(f.jsx)("button",{onClick:t,className:"confirm",children:"Confirm"})]})]})}))},Ce=(n(159),function(e){var t=e.session,n=e.onReserve,a=e.isWithoutBooking,c=void 0!==a&&a,r=Object(s.useState)(!1),o=Object(l.a)(r,2),d=o[0],u=o[1],j=t.name,b=t.address,O=t.phone,h=t.endDate,m=t.startDate,p=t.isAvailable,x=t.id,g=Object(s.useContext)(Ge),D=Object(s.useState)(!1),S=Object(l.a)(D,2),N=S[0],C=S[1],y=function(){null!==g&&void 0!==g&&g.phone?C(!0):alert("Firstly enter phone number in your profile")},T=function(){var e=Object(A.a)(Object(w.a)().mark((function e(){return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(g),null===g||void 0===g||!g.uid){e.next=11;break}return u(!0),e.next=5,G(Object(v.a)(Object(v.a)({},g),{},{sessionsAccepted:[].concat(Object(Z.a)((null===g||void 0===g?void 0:g.sessionsAccepted)||[]),[t])}));case 5:return e.next=7,E({name:null===g||void 0===g?void 0:g.name,phone:null===g||void 0===g?void 0:g.phone,id:null===g||void 0===g?void 0:g.uid});case 7:u(!1),null===n||void 0===n||n(),e.next=12;break;case 11:alert("Error((( try again");case 12:C(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(A.a)(Object(w.a)().mark((function e(n){return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(x,Object(v.a)(Object(v.a)({},t),{},{isAvailable:!1,client:n}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d?Object(f.jsx)(ce,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"currentSession ".concat(p?"animateSession":"unavailableSession"),children:[Object(f.jsxs)("div",{className:"dateTime",children:[Object(f.jsx)("span",{className:"date",children:$()(m).format(re.DATE_FOR_SLOT)}),Object(f.jsx)("span",{className:"time",children:"".concat(je(m,re.DEFAULT_TIME)," -\n          ").concat(je(h,re.DEFAULT_TIME),"\n          ")})]}),Object(f.jsxs)("div",{className:"masterInfo",children:[Object(f.jsxs)("h1",{children:[Object(f.jsx)("img",{src:De,alt:""}),j]}),Object(f.jsxs)("h2",{children:[Object(f.jsx)("img",{src:"https://cdn.icon-icons.com/icons2/2248/PNG/512/phone_icon_136322.png",alt:""}),O]})]}),Object(f.jsx)("div",{className:"address",children:Object(f.jsxs)("h1",{className:"".concat(b?"":"emptyAddress"),children:[Object(f.jsx)("img",{src:"http://cdn.onlinewebfonts.com/svg/img_339206.png",alt:""}),b||"Get the address by phone"]})}),c?Object(f.jsx)(f.Fragment,{}):g?g.uid===t.ownerUid?Object(f.jsx)("div",{className:"notAuth",children:"It`s your session"}):Object(f.jsx)("div",{onClick:y,className:"bookButton ".concat(p?"available":"unavailable"),children:p?"Book a session":"Reserved"}):Object(f.jsx)(i.b,{className:"notAuth",to:"/login",children:"Log in to reserve"})]}),N&&Object(f.jsx)(Ne,{onConfirm:T,onClose:function(){return C(!1)}})]})}),ye=!1,Te=function(e){var t,n=e.sessions,a=e.currentDate,c=e.setCurrentDate,r=e.onDataUpdate,i=Object(s.useState)(),o=Object(l.a)(i,2),d=o[0],u=o[1],j=Object(s.useState)(),b=Object(l.a)(j,2),O=b[0],h=b[1],m=n.length?(t=n,fe(a).map((function(e){return Object(v.a)(Object(v.a)({},e),{},{timeslots:t.filter((function(t){return $()(t.startDate).isSame($()(e.value),"date")}))})}))):fe(a),p=function(e){console.log(e),u(e),c($()(e.value))};return Object(s.useEffect)((function(){h(void 0),u(m.find((function(e){return $()(e.value).isSame(a,"day")})))}),[a]),Object(s.useEffect)((function(){h(void 0),u(void 0),c($()())}),[n]),Object(f.jsxs)("div",{className:"timeslotSelector",children:[Object(f.jsxs)("div",{className:"calendar",children:[Object(f.jsx)("div",{className:"calendar__monthSelect",children:Object(f.jsx)(ge,{currentDate:a,setCurrentDate:c,isDisabled:ye})}),Object(f.jsx)("div",{className:"calendar__head calendar__grid",children:Object(f.jsx)(xe,{})}),Object(f.jsx)("div",{className:"calendar__body calendar__grid",children:null===m||void 0===m?void 0:m.map((function(e,t){return Object(f.jsx)(ve,{isDisabled:ye,isWithAvailable:!0,day:e,setDate:p},t)}))})]}),Object(f.jsxs)("div",{className:"slots",children:[Object(f.jsx)(me,{isDisabled:ye,currentSession:O,setCurrentSession:h,timeslots:null===d||void 0===d?void 0:d.timeslots,isOnlyFreeSlots:!1,setIsOnlyFreeSlots:function(){}}),O&&Object(f.jsx)(Ce,{onReserve:r,session:O})]})]})},Ee=n(94),ke=(n(160),function(e){var t=e.selectedUsers,n=e.setSelectedUsers,a=Object(s.useState)(),c=Object(l.a)(a,2),r=c[0],i=c[1];Object(s.useEffect)((function(){var e;e=i,W((function(t){var n,s=null===(n=Object.values(t).filter((function(e){return e.role===O.STORE||e.role===O.ADMIN})))||void 0===n?void 0:n.map((function(e){return{label:e.name||"Unknown",value:e.uid}}));e(s||[])}))}),[]);return Object(f.jsx)("div",{className:"filters",children:(null===r||void 0===r?void 0:r.length)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"Find time slots by Master "}),Object(f.jsx)(Ee.a,{className:"dropdown",value:t,onChange:function(e){n(e)},options:r,isMulti:!0})]})})}),we=function(e){return!!e&&(e.role===O.ADMIN||e.role===O.STORE)},Ae=["startTime","endTime","duration"],_e=function(e){console.log(e);for(var t=[],n=e.startTime,s=e.endTime,a=e.duration,c=Object(ie.a)(e,Ae),r=$()(e.startDate).format(re.DEFAULT_DATE),i=Ie(n),o=(Ie(s)-i)/a,l=$()(e.endDate).diff($()(e.startDate),"days")+1,d=0;d<l;d++)for(var u=0;u<o;u++)t.push(Object(v.a)(Object(v.a)({},c),{},{startDate:$()(r).add(d,"day").format(re.DEFAULT_DATE)+"T"+Me(i+a*u),endDate:$()(r).add(d,"day").format(re.DEFAULT_DATE)+"T"+Me(i+a*(u+1))}));return t},Fe=function(e){return e?null===e||void 0===e?void 0:e.filter((function(e){return $()(e.startDate).isSame($()(),"day")})):[]},Ie=function(e){return 60*Number(e.slice(0,2))+Number(e.slice(3,5))},Me=function(e){var t=e%60;return Math.round(e/60)+(String(t).length<2?":0":":")+t},Ue=function(e){var t,n=e.onCreate,a=Object(p.b)(),c=a.control,r=a.register,i=a.handleSubmit,o=a.formState.errors,d=a.setValue,u=a.getValues,j=Object(s.useContext)(Ge),b=Object(s.useState)(null),O=Object(l.a)(b,2),h=O[0],m=O[1],x=function(){var e=Object(A.a)(Object(w.a)().mark((function e(t){var s,a;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=17;break}return m(_.PENDING),e.prev=2,s=Object(v.a)(Object(v.a)({},t),{},{isAvailable:!0,ownerUid:null===j||void 0===j?void 0:j.uid}),a=_e(s),e.next=7,P(Q,a);case 7:return e.next=9,G(Object(v.a)(Object(v.a)({},j),{},{sessionsCreated:[].concat(Object(Z.a)((null===j||void 0===j?void 0:j.sessionsCreated)||[]),Object(Z.a)(a))}));case 9:m(_.SUCCESS),n(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),alert(e.t0),m(_.FAILED);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("form",{className:"createSessionForm",onSubmit:i(x),children:h===_.PENDING?Object(f.jsx)(ce,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"Name"}),Object(f.jsx)("input",Object(v.a)({defaultValue:null===j||void 0===j?void 0:j.name},r("name",{required:!0}))),o.name&&Object(f.jsx)("span",{children:"This field is required"}),Object(f.jsx)("br",{})]}),Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"Phone"}),Object(f.jsx)("input",Object(v.a)({defaultValue:null===j||void 0===j?void 0:j.phone},r("phone",{required:!0}))),o.phone&&Object(f.jsx)("span",{children:"This field is required"})]}),Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"Adress"}),Object(f.jsx)("input",Object(v.a)({defaultValue:null===j||void 0===j?void 0:j.address},r("address",{required:!0}))),o.address&&Object(f.jsx)("span",{children:"This field is required"})]}),Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"Start of working day"}),Object(f.jsx)("input",Object(v.a)(Object(v.a)({type:"time",defaultValue:"10:00"},r("startTime",{required:!0})),{},{onChange:function(e){var t=e.target.value,n=u("endTime");Ie(t)>=Ie(n)&&d("endTime",Me(Ie(t)+60))}})),o.startTime&&Object(f.jsx)("span",{children:"This field is required"})]}),Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"End of working day"}),Object(f.jsx)("input",Object(v.a)(Object(v.a)({type:"time",defaultValue:"18:00"},r("endTime",{required:!0})),{},{onChange:function(e){var t=e.target.value,n=u("startTime");Ie(n)>=Ie(t)&&d("startTime",Me(Ie(t)-60))}})),o.endTime&&Object(f.jsx)("span",{children:"This field is required"})]}),Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"Session duration (minutes)"}),Object(f.jsx)("input",Object(v.a)({type:"number",defaultValue:60},r("duration",{required:{value:!0,message:"This field is required"},min:{value:30,message:"Min value - 30 minutes"},max:{value:180,message:"Max value - 180 minutes"}}))),Object(f.jsx)("span",{children:null===(t=o.duration)||void 0===t?void 0:t.message})]}),Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"Start Date"}),Object(f.jsx)(ue,{defaultValue:$()(),dateFormat:re.DATE_FOR_SCHEDULE,onChange:function(){},showTimeSelect:!1,name:"startDate",control:c,onChangeData:function(e){e&&d("endDate",$()(e).add(1,"day").format())}}),o.endDate&&Object(f.jsx)("span",{children:"This field is required"})]}),Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"End Date"}),Object(f.jsx)(ue,{defaultValue:$()().add(1,"day"),dateFormat:re.DATE_FOR_SCHEDULE,onChange:function(){},showTimeSelect:!1,name:"endDate",control:c,onChangeData:function(e){var t=$()(u("startDate"));$()(e).isAfter(t)||$()(e).isSame(t,"day")||d("startDate",$()(e).subtract(1,"day").format())}}),o.endDate&&Object(f.jsx)("span",{children:"This field is required"})]}),Object(f.jsx)("input",{className:"submitButton",type:"submit"})]})})},Le=function(){var e=Object(s.useContext)(Ge),t=Object(s.useState)(!1),n=Object(l.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)([]),i=Object(l.a)(r,2),o=i[0],d=i[1],u=Object(s.useState)($()()),j=Object(l.a)(u,2),b=j[0],O=j[1],h=Object(s.useState)([]),m=Object(l.a)(h,2),v=m[0],p=m[1],x=Object(s.useState)(!1),g=Object(l.a)(x,2),D=g[0],S=g[1],N=Object(s.useState)(!1),C=Object(l.a)(N,2),y=C[0],T=C[1],E=function(){var e=Object(A.a)(Object(w.a)().mark((function e(){var t,n;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),t=v.map((function(e){return e.value})),e.next=4,ne(t);case 4:n=e.sent,d(n),c(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){E()}),[v]);return Object(f.jsxs)("div",{children:[D&&Object(f.jsx)(Oe,{onClose:function(){return S(!1)},title:"Create Session",children:Object(f.jsx)(be,{onCreate:function(){E(),S(!1)}})}),y&&Object(f.jsx)(Oe,{onClose:function(){return T(!1)},title:"Create Schedule",children:Object(f.jsx)(Ue,{onCreate:function(){E(),T(!1)}})}),we(e)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return S(!0)},children:"Create separate session"}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{onClick:function(){return T(!0)},children:"Create schedule of sessions"})]}),Object(f.jsx)(ke,{selectedUsers:v,setSelectedUsers:p}),a?Object(f.jsx)(ce,{}):Object(f.jsx)(Te,{sessions:o,currentDate:b,setCurrentDate:O,onDataUpdate:E})]})},qe=n(45),Re=function(e){var t,n;Object(qe.a)(e);var a=Object(p.b)(),c=a.register,r=a.handleSubmit,i=a.formState.errors,o=Object(s.useContext)(Ge),d=Object(s.useState)(!1),u=Object(l.a)(d,2),j=u[0],b=u[1],h=Object(s.useState)(!1),D=Object(l.a)(h,2),S=D[0],N=D[1],C=Object(s.useState)(!1),y=Object(l.a)(C,2),T=y[0],E=y[1],k=Object(s.useState)(!1),_=Object(l.a)(k,2),F=_[0],I=_[1],M=Object(s.useState)(!1),U=Object(l.a)(M,2),L=U[0],q=U[1],R=Object(s.useState)(),V=Object(l.a)(R,2),P=V[0],B=V[1],Y=(null===o||void 0===o?void 0:o.role)===O.ADMIN,H=(null===o||void 0===o?void 0:o.role)===O.STORE?null===o||void 0===o||null===(t=o.sessionsCreated)||void 0===t?void 0:t.filter((function(e){return!e.isAvailable})):null===o||void 0===o?void 0:o.sessionsAccepted;console.log(o);var W=function(){var e=Object(A.a)(Object(w.a)().mark((function e(t){return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===o||void 0===o||!o.email||!o.uid){e.next=7;break}return N(!0),e.next=5,G(Object(v.a)(Object(v.a)({},o),t));case 5:N(!1),q(!1);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return q(!L)},children:L?"Cancel editing":"Change info"}),S?Object(f.jsx)(ce,{}):function(){var e;return o?L?Object(f.jsxs)("form",{onSubmit:r(W),children:[Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"Name:"}),Object(f.jsx)("input",Object(v.a)(Object(v.a)({},c("name")),{},{defaultValue:o.name}))]}),Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"Phone:"}),Object(f.jsx)("input",Object(v.a)(Object(v.a)({},c("phone",{pattern:{value:x.phone,message:"Invalid phone number"}})),{},{defaultValue:o.phone})),Object(f.jsx)("span",{children:null===(e=i.phone)||void 0===e?void 0:e.message})]}),Object(f.jsxs)("div",{className:"field",children:[Object(f.jsx)("p",{children:"Address:"}),Object(f.jsx)("input",Object(v.a)(Object(v.a)({},c("address")),{},{defaultValue:o.address}))]}),Object(f.jsx)("input",{className:"submitButton",type:"submit"})]}):Object(f.jsxs)("div",{className:"profileInfo",children:[Object(f.jsxs)("p",{children:["Email: ",o.email]}),Object(f.jsxs)("p",{children:["Name: ",o.name]}),Object(f.jsxs)("p",{children:["Phone: ",o.phone]}),Object(f.jsxs)("p",{children:["Address: ",o.address]}),Object(f.jsxs)("p",{children:["Role: ",o.role]})]}):Object(f.jsx)(f.Fragment,{})}(),Y&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return b(!0)},children:"Create new store"}),j&&Object(f.jsx)(Oe,{isLoading:T,onClose:function(){return b(!1)},children:Object(f.jsx)(g,{handleClick:function(e){var t=Object(m.b)();E(!0),Object(m.a)(t,e.email,e.password).then((function(e){var t=e.user;console.log(t),G({email:t.email,uid:t.uid,role:"store"}),alert("New store successfully created")})).catch(console.error).finally((function(){b(!1),E(!1)}))}})})]}),Object(f.jsx)("button",{onClick:function(){return I(!F)},children:F?"Hide sessions":"Show Sessions for today"}),F&&Object(f.jsx)(f.Fragment,{children:(null===(n=Fe(H))||void 0===n?void 0:n.length)>0?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"userSessions",children:["Sessions for today:",Object(f.jsx)(me,{timeslots:Fe(H),isOnlyFreeSlots:!1,currentSession:P,setCurrentSession:B,setIsOnlyFreeSlots:function(){}})]}),P&&Object(f.jsx)(Ce,{isWithoutBooking:!0,session:P})]}):Object(f.jsx)(f.Fragment,{children:"You have not sessions for today"})})]})},Ve=["component"],Pe=function(e){var t=e.component,n=Object(ie.a)(e,Ve),s=b().isAuth;return Object(f.jsx)(d.b,Object(v.a)(Object(v.a)({},n),{},{render:function(e){return s?Object(f.jsx)(t,Object(v.a)({},e)):Object(f.jsx)(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Be=(n(175),function(e){Object(qe.a)(e);var t=Object(d.h)(),n=b().isAuth,s=[{route:"/",title:"Home",isSensitive:!0},{route:"/sessions",title:"Sessions",isSensitive:!1},{route:"/profile",title:"Profile",isSensitive:!0}].filter((function(e){return!e.isSensitive||n}));return console.log(t.pathname),Object(f.jsxs)("div",{className:"menu",children:[s.map((function(e,n,s){var c=e.route,r=e.title;return Object(f.jsxs)(a.a.Fragment,{children:[Object(f.jsx)(i.b,{className:"link ".concat(t.pathname===c?"active":""),to:c,children:r}),n!==s.length-1&&Object(f.jsx)("div",{className:"separator"})]},n)})),Object(f.jsx)("div",{className:"slider-bar ".concat(function(){var e=t.pathname;return"/"===e||"/sessions"===e&&!n?"first":"/sessions"===e?"second":"/profile"===e?"third":"none"}())})]})}),Ye=function(e){Object(qe.a)(e);var t=Object(d.h)(),n=u(),a=Object(s.useContext)(Ge);return Object(f.jsx)("div",{className:"profileSection",children:a?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(i.b,{className:"profileLink",to:"/profile",children:Object(f.jsx)("img",{src:De,alt:""})}),Object(f.jsx)("div",{className:"authButton logout",children:Object(f.jsx)("p",{onClick:function(){n(y()),t.pathname="/login"},children:"Log Out"})}),Object(f.jsx)("div",{className:"authButton name",children:Object(f.jsxs)("p",{children:[(null===a||void 0===a?void 0:a.name)||" - ",Object(f.jsxs)("span",{children:["(",null===a||void 0===a?void 0:a.role,")"]})]})})]}):Object(f.jsx)(i.b,{className:"authButton",to:"/login",children:"Sign In"})})},He=function(e){return Object(qe.a)(e),Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)("div",{className:"title",children:"Aseev"}),Object(f.jsx)(Be,{}),Object(f.jsx)(Ye,{})]})},Ge=Object(s.createContext)(null);var We=function(){var e=b().id,t=Object(s.useState)(null),n=Object(l.a)(t,2),a=n[0],c=n[1];return Object(s.useEffect)((function(){e?Y(H,e,c):c(null)}),[e]),Object(f.jsxs)(Ge.Provider,{value:a,children:[Object(f.jsx)(He,{}),Object(f.jsx)("div",{className:"content",children:Object(f.jsxs)(d.d,{children:[Object(f.jsx)(Pe,{exact:!0,path:"/",component:h}),Object(f.jsx)(Pe,{exact:!0,path:"/profile",component:Re}),Object(f.jsx)(d.b,{exact:!0,path:"/sessions",component:Le}),Object(f.jsx)(d.b,{exact:!0,path:"/login",component:k}),Object(f.jsx)(d.b,{exact:!0,path:"/register",component:K})]})})]})},ze=n(92),Ke=n.n(ze),Ze=n(26),Je=n(65),$e=n(57),Qe=Object(Ze.b)({userReducer:T}),Xe={key:"root",storage:Ke.a},et=Object(Je.a)(Xe,Qe),tt=Object(D.a)({reducer:et,middleware:[$e.a]}),nt=n(93),st=Object(Je.b)(tt);r.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(i.a,{children:Object(f.jsx)(o.a,{store:tt,children:Object(f.jsx)(nt.a,{loading:null,persistor:st,children:Object(f.jsx)(We,{})})})})}),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.3b8cde08.chunk.js.map